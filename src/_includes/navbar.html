{% include earlyJs.html %}
<nav class="navbar navbar-expand-lg px-4 mb-4">
    <a class="navbar-brand beta-tag" href="{{ site.url }}/{{ page.language }}/">{% t 'site.title' %}</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto">
            {% assign homepage = page.language | | prepend: "/" | append: "/" %}
            {% assign biasAnalysis = page.language | | prepend: "/" | append: "/bias/" %}
            {% assign about = page.language | | prepend: "/" | append: "/about/" %}
            <li class="nav-item{% if page.dir == homepage %} active{% endif %}">
                <a class="nav-link" href="{{ site.url }}/{{ page.language }}/">{% t 'page.home' %}</a>
            </li>
            <li class="nav-item{% if page.dir == biasAnalysis %} active{% endif %}">
                <a class="nav-link" href="{{ site.url }}/{{ page.language }}/bias/">{% t 'page.biasAnalysis' %}</a>
            </li>
            <li class="nav-item{% if page.dir == about %} active{% endif %}">
                <a class="nav-link" href="{{ site.url }}/{{ page.language }}/about/">{% t 'page.about' %}</a>
            </li>
        </ul>
        <div class="btn-group-navbar">
            <button class="btn btn-outline-secondary" id="theme-toggle">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708"/>
                </svg>
            </button>
            <div class="dropdown px-4">
                <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                    {{ page.language | capitalize }}
                </button>
                <ul class="dropdown-menu dropdown-menu-language dropdown-menu-md-start dropdown-menu-lg-end" aria-labelledby="dropdownMenuButton" data-bs-display="static">
                    <li><a class="dropdown-item" onclick="switchLanguage('en')">English</a></li>
                    <li><a class="dropdown-item" onclick="switchLanguage('fr')">Fran√ßais</a></li>
                </ul>
            </div>
            {% if page.processApi %}
            <div class="btn-group">
                <button class="btn btn-outline-primary" id="dateRangeButton" data-bs-toggle="dropdown" aria-expanded="false">
                    {% t 'time.selectDateRange' %}
                </button>
                <button class="btn btn-outline-danger" onclick="setRangeFormat('all')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2z"/>
                        <path d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466"/>
                    </svg>
                </button>
                <div class="dropdown-menu dropdown-menu-time dropdown-menu-md-start dropdown-menu-lg-end" aria-labelledby="dropdownMenuButton" data-bs-display="static">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col text-center ratio ratio-16x9 mx-1">
                                <button class="btn px-0 text-wrap dropdown-item date-range-item" onclick="setRangeFormat('last7')">{% t 'time.last7Days' %}</button>
                            </div>
                            <div class="col text-center ratio ratio-16x9 mx-1">
                                <button class="btn px-0 text-wrap dropdown-item date-range-item" onclick="setRangeFormat('last30')">{% t 'time.last30Days' %}</button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col text-center ratio ratio-16x9 mx-1">
                                <button class="btn px-0 text-wrap dropdown-item date-range-item" onclick="setRangeFormat('last6Months')">{% t 'time.last6Months' %}</button>
                            </div>
                            <div class="col text-center ratio ratio-16x9 mx-1">
                                <button class="btn px-0 text-wrap dropdown-item date-range-item" onclick="setRangeFormat('sinceLastElection')">{% t 'time.sinceLastElection' %}</button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col text-center ratio ratio-16x9 mx-1">
                                <button class="btn px-0 text-wrap dropdown-item date-range-item" onclick="setRangeFormat('campaignPeriod')">{% t 'time.campaignPeriod' %}</button>
                            </div>
                            <div class="col text-center ratio ratio-16x9 mx-1">
                                <button class="btn px-0 text-wrap dropdown-item date-range-item" onclick="setRangeFormat('preCampaignPeriod')">{% t 'time.preCampaignPeriod' %}</button>
                            </div>
                        </div>
                    </div>
                    <div class="input-group mb-2 mt-1">
                        <input type="date" class="form-control" id="startDate">
                        <span class="input-group-text">{% t 'time.to' %}</span>
                        <input type="date" class="form-control" id="endDate">
                    </div>
                    <button class="btn btn-primary w-100" onclick="applyCustomRange()">{% t 'general.apply' %}</button>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</nav>